set -euo pipefail

echo "🔍 Pre-commit: Lancement des vérifications..."

# Vérifications côté server
cd apps/server || exit 1
uv run ruff check --fix
uv run ruff format
echo "✅ Server: Linting et formatage terminés avec succès"

# Retour au repo racine puis côté client
cd - >/dev/null || true
cd apps/client || exit 1
pnpm lint
pnpm format
echo "✅ Client: Linting et formatage terminés avec succès"

echo "🎉 Pre-commit hook exécuté avec succès !"